<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on XPhyro&#39;s Blog</title>
        <link>https://xphyro.github.io/posts/</link>
        <description>Recent content in Posts on XPhyro&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc-sa/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt; &amp; &lt;a href=&#34;https://opensource.org/licenses/MIT&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MIT&lt;/a&gt;</copyright>
        <lastBuildDate>Thu, 15 Jul 2021 09:09:28 +0300</lastBuildDate>
        <atom:link href="https://xphyro.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Setting Up A Personal Blog</title>
            <link>https://xphyro.github.io/posts/2021/07/15/hugo-setup/</link>
            <pubDate>Thu, 15 Jul 2021 09:09:28 +0300</pubDate>
            
            <guid>https://xphyro.github.io/posts/2021/07/15/hugo-setup/</guid>
            <description>Introduction In this article, I will explain the steps for creating a blog like mine: static, automatically generated and hosted for free.
Framework I have built this blog using Hugo and the hello-friend-ng theme, and host it on GitHub Pages.
Workflow I use a private Git repository to version the development side of the blog (such that drafts will not be public), and use a public repository named xphyro.github.io to host the public web site.</description>
            <content type="html"><![CDATA[<h1 id="introduction">Introduction</h1>
<p>In this article, I will explain the steps for creating a blog like mine: static, automatically generated and hosted for free.</p>
<h2 id="framework">Framework</h2>
<p>I have built this blog using <a href="https://gohugo.io/">Hugo</a> and the <a href="https://github.com/rhazdon/hugo-theme-hello-friend-ng">hello-friend-ng</a> theme, and host it on <a href="https://pages.github.com/">GitHub Pages</a>.</p>
<h2 id="workflow">Workflow</h2>
<p>I use a private Git repository to version the development side of the blog (such that drafts will not be public), and use a public repository named <code>xphyro.github.io</code> to host the public web site. I do not use <a href="https://github.com/features/actions">GitHub Actions</a> or any other external automations; rather, I set up a client-side pre-push <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">hook</a> in the development repository that builds the web site and pushes the build to the repository acknowledged by GitHub Pages.</p>
<h1 id="setup">Setup</h1>
<h2 id="essentials">Essentials</h2>
<p>The following are the steps to set up a near-exact copy of this blog as of the time of writing this article.</p>
<ul>
<li>Complete the <a href="https://gohugo.io/getting-started/quick-start/">quick start</a> to get a basic idea of Hugo.</li>
<li>Navigate to the root directory of your Hugo project and add the <code>hello-friend-ng</code> theme as a sub-module by executing the following.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git submodule add <span style="color:#e6db74">&#39;git@github.com:rhazdon/hugo-theme-hello-friend-ng.git&#39;</span> themes/hello-friend-ng
</code></pre></div><ul>
<li>Overwrite your <code>config.toml</code> file with the example file by executing the following</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cp -f themes/hello-friend-ng/exampleSite/config.toml config.toml
</code></pre></div><p>Then, configure your website by filling in or changing the details.</p>
<p>Below are some important changes (for replication purposes) in my configuration. I have omitted changes that are clearly explained in the default configuration, or changes that are obvious.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">permalinks</span>]
  <span style="color:#a6e22e">posts</span> = <span style="color:#e6db74">&#34;/posts/:year/:month/:day/:filename/&#34;</span>

[<span style="color:#a6e22e">taxonomies</span>]
  <span style="color:#a6e22e">tag</span>      = <span style="color:#e6db74">&#34;tags&#34;</span>
  <span style="color:#a6e22e">category</span> = <span style="color:#e6db74">&#34;categories&#34;</span>
  <span style="color:#a6e22e">series</span>   = <span style="color:#e6db74">&#34;series&#34;</span>

[<span style="color:#a6e22e">languages</span>]
  [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>]
    <span style="color:#a6e22e">copyright</span> = <span style="color:#e6db74">&#39;&lt;a href=&#34;https://creativecommons.org/licenses/by-nc-sa/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt; &amp; &lt;a href=&#34;https://opensource.org/licenses/MIT&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MIT&lt;/a&gt;&#39;</span>

[<span style="color:#a6e22e">menu</span>]
  [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
    <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;posts&#34;</span>
    <span style="color:#a6e22e">name</span>       = <span style="color:#e6db74">&#34;Posts&#34;</span>
    <span style="color:#a6e22e">url</span>        = <span style="color:#e6db74">&#34;/posts&#34;</span>
    <span style="color:#a6e22e">weight</span>     = <span style="color:#ae81ff">20</span>
  [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
    <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;tags&#34;</span>
    <span style="color:#a6e22e">name</span>       = <span style="color:#e6db74">&#34;Tags&#34;</span>
    <span style="color:#a6e22e">url</span>        = <span style="color:#e6db74">&#34;/tags&#34;</span>
    <span style="color:#a6e22e">weight</span>     = <span style="color:#ae81ff">30</span>
  [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
    <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;categories&#34;</span>
    <span style="color:#a6e22e">name</span>       = <span style="color:#e6db74">&#34;Categories&#34;</span>
    <span style="color:#a6e22e">url</span>        = <span style="color:#e6db74">&#34;/categories&#34;</span>
    <span style="color:#a6e22e">weight</span>     = <span style="color:#ae81ff">40</span>
  [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
    <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;series&#34;</span>
    <span style="color:#a6e22e">name</span>       = <span style="color:#e6db74">&#34;Series&#34;</span>
    <span style="color:#a6e22e">url</span>        = <span style="color:#e6db74">&#34;/series&#34;</span>
    <span style="color:#a6e22e">weight</span>     = <span style="color:#ae81ff">50</span>
  [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
    <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;about&#34;</span>
    <span style="color:#a6e22e">name</span>       = <span style="color:#e6db74">&#34;About&#34;</span>
    <span style="color:#a6e22e">url</span>        = <span style="color:#e6db74">&#34;/about&#34;</span>
    <span style="color:#a6e22e">weight</span>     = <span style="color:#ae81ff">200</span>

[<span style="color:#a6e22e">markup</span>]
  [<span style="color:#a6e22e">markup</span>.<span style="color:#a6e22e">tableOfContents</span>]
    <span style="color:#a6e22e">startLevel</span> = <span style="color:#ae81ff">1</span>
</code></pre></div><p>Setting <code>startLevel</code> to 1 is important to have all sections visible in the table of contents of a post. Also, make sure to not add <code>post = &quot;posts&quot;</code> as a taxonomy: it will create duplicate paths and race conditions<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>Having completed the above steps, you can build or preview the website exactly the same way as you did in the quick start, after which you should have a website that looks and behaves very much like mine.</p>
<h2 id="justificationjustify">Justification<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></h2>
<p>If you create a post now, you will see that yours is not justified like this. To achieve justification, set <code>customCSS = [&quot;/style.css&quot;]</code> under <code>[params]</code> in your configuration and paste</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">post-content</span> <span style="color:#f92672">p</span> {
        <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">justify</span>;
}
</code></pre></div><p>into the file <code>static/style.css</code>.</p>
<h2 id="mathjaxmathjax">MathJax<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></h2>
<p>To typeset $\LaTeX$, you can include <a href="https://www.mathjax.org/">MathJax</a> in your posts by appending</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{- if .Params.mathjax -}}
    {{ partial &#34;mathjax.html&#34; . }}
{{- end }}
</code></pre></div><p>to <code>themes/hello-friend-ng/layouts/partials/head.html</code> and pasting the following into <code>layouts/partials/mathjax.html</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">async</span>
  <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/mathjax@2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#34;</span>&gt;
&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/x-mathjax-config&#34;</span>&gt;
<span style="color:#a6e22e">MathJax</span>.<span style="color:#a6e22e">Hub</span>.<span style="color:#a6e22e">Config</span>({
  <span style="color:#a6e22e">tex2jax</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">inlineMath</span><span style="color:#f92672">:</span> [[<span style="color:#e6db74">&#39;$&#39;</span>,<span style="color:#e6db74">&#39;$&#39;</span>], [<span style="color:#e6db74">&#39;\\(&#39;</span>,<span style="color:#e6db74">&#39;\\)&#39;</span>]],
    <span style="color:#a6e22e">displayMath</span><span style="color:#f92672">:</span> [[<span style="color:#e6db74">&#39;$$&#39;</span>,<span style="color:#e6db74">&#39;$$&#39;</span>], [<span style="color:#e6db74">&#39;\[&#39;</span>,<span style="color:#e6db74">&#39;\]&#39;</span>]],
    <span style="color:#a6e22e">processEscapes</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">processEnvironments</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">skipTags</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#39;script&#39;</span>, <span style="color:#e6db74">&#39;noscript&#39;</span>, <span style="color:#e6db74">&#39;style&#39;</span>, <span style="color:#e6db74">&#39;textarea&#39;</span>, <span style="color:#e6db74">&#39;pre&#39;</span>, <span style="color:#e6db74">&#39;code&#39;</span>,
    ],
    <span style="color:#a6e22e">TeX</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">equationNumbers</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">autoNumber</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;AMS&#34;</span> },
      <span style="color:#a6e22e">extensions</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;AMSmath.js&#34;</span>, <span style="color:#e6db74">&#34;AMSsymbols.js&#34;</span>]
    },
  }
});
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><p>Then, you should be able to render in-line and display mathematics using $\LaTeX$ syntax respectively between single or double dollar signs after setting <code>mathjax: true</code> in the frontmatter of your post. Here&rsquo;s an example:
$$
G_{\mu\nu} + \Lambda g_{\mu\nu} = \kappa T_{\mu\nu}
$$</p>
<p>MathJax will only be loaded in posts that sets the <code>mathjax</code> field to <code>true</code>. It will not be loaded in any other case, including on non-post pages.</p>
<h2 id="eliminating-javascript">Eliminating JavaScript</h2>
<p><code>hello-friend-ng</code> uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> for two purposes: to utilise <a href="https://prismjs.com/">PrismJS</a> and to allow toggling between themes.</p>
<p>If you would like to eliminate the above-mentioned unnecessary usages of JavaScript from your website, which I highly recommend you do, follow these steps:</p>
<ul>
<li>Navigate to <code>themes/hello-friend-ng</code>.</li>
<li>Execute <code>rm -rf assets/js layouts/partials/javascript.html</code>.</li>
<li>Open <code>layouts/_default/baseof.html</code> in a text editor and remove the line that reads <code>{{ partial &quot;javascript.html&quot; . }}</code>.</li>
</ul>
<p>Now, your website should be free of JavaScript. If you have set up MathJax, it will still behave as expected.</p>
<p>You can also add <code>enableThemeToggle = false</code> under the <code>[params]</code> section in your configuration to get rid of the now dysfunctional toggle.</p>
<h2 id="deployment">Deployment</h2>
<p>After building, Hugo will create a directory named (by default) <code>public</code>. Navigate into this directory and execute the following commands to initialise a Git repository, add all files to the Git index and commit them.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git init
git add -A
git commit -m <span style="color:#e6db74">&#34;Initial commit&#34;</span>
</code></pre></div><p>This will be the repository you deploy.</p>
<p>Now, you need to create a repository on GitHub that would be acknowledged by the GitHub Pages application. Go onto <a href="https://github.com/new">GitHub</a> and create a repository named <code>USERNAME.github.io</code> where <code>USERNAME</code> is your username. Then, switch back to the terminal from before and execute the following.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git remote add origin <span style="color:#e6db74">&#34;git@github.com:USERNAME/USERNAME.github.io.git&#34;</span>
git push --set-upstream origin master
</code></pre></div><p>After a few seconds to a few minutes, GitHub Pages will automatically deploy your website on <code>https://USERNAME.github.io</code>.</p>
<h3 id="alternate-methods">Alternate Methods</h3>
<p>If you would not like to host your website on GitHub Pages, which is <em>very</em> understandable, there are many other similar hosting services such as <a href="https://render.com/docs/static-sites">Render</a>. You may use one of those, or even better, host on your own server using your own domain name.</p>
<p>If the exchange rate between your native currency and USD is sufficiently small, hosting should be quite cheap; and, you can get a domain name for free thanks to <a href="https://nic.eu.org/">EU.org</a>.</p>
<p>To learn more about how to host on your own server and set up your own domain name, see the basic courses on <a href="https://landchad.net/">LandChad.net</a>.</p>
<h1 id="automation">Automation</h1>
<h2 id="building">Building</h2>
<p>To automatically build the website (without drafts) and push it live, paste the following script into <code>.git/hooks/pre-push</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#!/usr/bin/env sh
</span><span style="color:#75715e"></span>
set -e

cd <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>git rev-parse --show-toplevel<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
hugo --path-warnings
cd public
git add -A
GIT_COMMITTER_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hook&#34;</span> GIT_COMMITTER_EMAIL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> git commit --author<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hook &lt;&gt;&#34;</span> -m <span style="color:#e6db74">&#34;#</span><span style="color:#66d9ef">$(($(</span>git rev-list --all --count<span style="color:#66d9ef">)</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span><span style="color:#e6db74">: Automatic build&#34;</span>
git push
</code></pre></div><p>If you want the commit to be under your name and be signed normally, replace the commit line with <code>git commit -m &quot;#$(($(git rev-list --all --count) + 1)): Automatic build&quot;</code>.</p>
<h2 id="updating-last-modification-time">Updating Last Modification Time</h2>
<p>Hugo allows you to set the field <code>lastmod</code> in the frontmatter of your posts. If this field has a value later than the field <code>date</code>, the value is passed onto themes to be displayed somewhere in the post. This value might not be displayed depending on the theme you use.</p>
<p>It is quite cumbersome to update this field manually, so, if you would like to automate it, pas the following script into <code>.git/hooks/pre-commit</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#!/usr/bin/env sh
</span><span style="color:#75715e"></span>
git diff --cached --name-status | grep <span style="color:#e6db74">&#34;^M&#34;</span> | cut -d<span style="color:#e6db74">&#39;	&#39;</span> -f2- | grep <span style="color:#e6db74">&#34;^content/.*\.md</span>$<span style="color:#e6db74">&#34;</span> | <span style="color:#66d9ef">while</span> IFS<span style="color:#f92672">=</span> read -r file; <span style="color:#66d9ef">do</span>
	sed -i -E <span style="color:#e6db74">&#34;0,/^lastmod:\s*[0-9]{4}-.*/s//lastmod: </span><span style="color:#66d9ef">$(</span>date --iso-8601<span style="color:#f92672">=</span>seconds<span style="color:#66d9ef">)</span><span style="color:#e6db74">/&#34;</span> -- <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span>
    git add -- <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">done</span>
</code></pre></div><h1 id="references">References</h1>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Pedersen, B. E. (2021, July 16) Build Output Is Indeterministic. HUGO. Retrieved July 16, 2021, from <a href="https://discourse.gohugo.io/t/build-output-is-indeterministic/33850">https://discourse.gohugo.io/t/build-output-is-indeterministic/33850</a>.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Mackenzie, D. (2019, May 1). Way to justify posts. GitHub. Retrieved July 15, 2021, from <a href="https://github.com/rhazdon/hugo-theme-hello-friend-ng/issues/20#issuecomment-488144749/">https://github.com/rhazdon/hugo-theme-hello-friend-ng/issues/20#issuecomment-488144749/</a>.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>xuchengpeng. (2018, July 10). Setting MathJax with Hugo. xuchengpeng. Retrieved July 15, 2021, from <a href="http://xuchengpeng.com/hexo-blog/2018/07/10/setting-mathjax-with-hugo/">http://xuchengpeng.com/hexo-blog/2018/07/10/setting-mathjax-with-hugo/</a>.&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
]]></content>
        </item>
        
    </channel>
</rss>
